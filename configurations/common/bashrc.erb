# skip this file on non-interactive shell
[ -z "$PS1" ] && return

# global variables
export PAGER=less
export EDITOR=vim

# set vi command editing mode
set -o vi

# dircolors
# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ] && [ -f ~/.dircolors ]; then
    eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias dir='dir --color=auto'
    alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# some more ls aliases
alias ll='ls -ahl'
alias la='ls -A'
alias lg='la | grep'
alias l=ls

# useful aliases
alias myip="curl -s icanhazip.com"

# fcd
fcd() { cd "$(fcdclient "$@")"; }
alias z=fcd

# Add bin directory to PATH
export PATH="$PATH:<%= pwd+"/bin" %>:."

# zsh only related options
if [ -n "$ZSH_VERSION" ]; then
    HISTFILE=~/.histfile
    HISTSIZE=10000
    SAVEHIST=100000
    # vi mode for zsh
    bindkey -v
    bindkey '^r' history-incremental-search-backward
    bindkey '^[[3~' delete-char
    export KEYTIMEOUT=1

    zstyle :compinstall filename "$HOME/.zshrc"

    autoload -Uz compinit
    compinit
fi

# Add powerline prompt
if [ "$TERM" = "xterm-256color" ] || [ "$TERM" = "screen-256color" ]; then
    if [ -n "$ZSH_VERSION" ]; then
        function precmd(){ powerline 2> /dev/null; }
        PS1="%{[1m[38;5;222m[48;5;236m%} Œª %{[0m[38;5;236m%}ÓÇ∞%{[0m%} "
        PS2="%{[0m[38;5;222m[48;5;236m%} ‚Üê %{[0m[38;5;236m%}ÓÇ∞%{[0m%} "
    else
        PROMPT_COMMAND='powerline 2> /dev/null'
        PS1="\[\033[1m\033[38;5;222m\033[48;5;236m\] Œª \[\033[0m\033[38;5;236m\]ÓÇ∞\[\033[0m\] "
        PS2="\[\033[0m\033[38;5;222m\033[48;5;236m\] ‚Üê \[\033[0m\033[38;5;236m\]ÓÇ∞\[\033[0m\] "
    fi
fi
